{% extends 'base.html' %}

{% block content %}
<body id="about">

  <!-- DNA image at the top -->
  <div class="centered-container">
    <img class="centered-image" src="{{ url_for('static', filename='images/dna.png') }}" alt="DNA">
  </div>

  <h2>{% block title %} About {% endblock %}</h2>
  <h3>Project info, updates, and how to cite snpXplorer.</h3>

  <!-- TOP INFO (no timeline here) -->
  <div class="container-main">
    <div class="column about-card" id="about-info">
      <h2>Project info</h2>

      <p>
        snpXplorer is a web-server built with
        <a href="https://flask.palletsprojects.com/en/2.3.x/" target="_blank" rel="noopener">Flask</a>
        and written in Python, HTML, and JavaScript.
        The source code is available on
        <a href="https://github.com/TesiNicco/snpXplorer" target="_blank" rel="noopener">GitHub</a>.
      </p>

      <p>
        License:
        <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">
          CC BY-NC-SA 4.0
        </a>.
      </p>

      <p>
        If you find snpXplorer useful, please cite:
        <a href="https://pubmed.ncbi.nlm.nih.gov/34048563/" target="_blank" rel="noopener">
          Tesi et al., 2021
        </a>.
      </p>

      <p>
        PRS tool:
        <a href="https://github.com/TesiNicco/jordan" target="_blank" rel="noopener">Jordan</a>.
      </p>

      <p>
        Questions / collaborations:
        <a href="mailto:n.tesi@amsterdamumc.nl">reach us</a>.
      </p>
    </div>
  </div>

    <!-- FEEDBACK + RATING -->
  <div class="container-main">
    <div class="column about-card" id="about-feedback">
      <h2>Feedback</h2>

      <p style="opacity:0.95;">
        You can <b>send a message</b>, <b>leave a star rating</b>, or <b>do both</b>.
        If you only want to rate snpXplorer, just select stars and leave the message empty.
        If you only want to send feedback, leave the stars empty.
        You can also submit anonymously.
      </p>

      <!-- optional flash message -->
      {% if feedback_message %}
        <p class="flash-ok">{{ feedback_message }}</p>
      {% endif %}

      <form method="post" action="{{ url_for('submit_feedback') }}" class="feedback-form">
        <div class="fb-row">
          <label class="fb-label" for="fb_name">Name (optional)</label>
          <input id="fb_name" name="name" type="text" class="fb-input" placeholder="Anonymous">
        </div>

        <div class="fb-row">
          <label class="fb-label">Rating (optional)</label>
          <div class="star-rating" aria-label="Rate snpXplorer">
            <input type="radio" id="star5" name="rating" value="5"><label for="star5" title="5 stars">★</label>
            <input type="radio" id="star4" name="rating" value="4"><label for="star4" title="4 stars">★</label>
            <input type="radio" id="star3" name="rating" value="3"><label for="star3" title="3 stars">★</label>
            <input type="radio" id="star2" name="rating" value="2"><label for="star2" title="2 stars">★</label>
            <input type="radio" id="star1" name="rating" value="1"><label for="star1" title="1 star">★</label>
          </div>
          <small style="display:block; margin-top:6px; opacity:0.9;">
            Tip: to clear a rating, refresh the page (or click a different star).
          </small>
        </div>

        <div class="fb-row">
          <label class="fb-label" for="fb_msg">Message (optional)</label>
          <textarea id="fb_msg" name="message" class="fb-textarea" rows="5"
                    placeholder="Tell us what worked well, what didn’t, or what you’d like to see next..."></textarea>
        </div>

        <button type="submit" class="fb-submit">Send</button>
      </form>
    </div>
  </div>

  <!-- TIMELINE -->
  <div class="container-main">
    <div class="column about-card" id="about-timeline">
      <h2>Updates timeline</h2>

      <div class="timeline">
        <div class="tl-item">
          <div class="tl-dot"></div>
          <div class="tl-content">
            <div class="tl-title">November 2025</div>
            <div class="tl-text">
              snpXplorer v2 is live: more robust, OpenGWAS integration, new Haplotypes, Single-annotation and PRS tabs.
            </div>
          </div>
        </div>

        <div class="tl-item">
          <div class="tl-dot"></div>
          <div class="tl-content">
            <div class="tl-title">August 2023</div>
            <div class="tl-text">
              Complete rewrite in Flask: major stability and speed improvements.
            </div>
          </div>
        </div>

        <div class="tl-item">
          <div class="tl-dot"></div>
          <div class="tl-content">
            <div class="tl-title">March 2022</div>
            <div class="tl-text">
              Redesign while keeping the older Shiny implementation.
            </div>
          </div>
        </div>

        <div class="tl-item">
          <div class="tl-dot"></div>
          <div class="tl-content">
            <div class="tl-title">February 2022</div>
            <div class="tl-text">
              Added sQTL to the Annotation section.
            </div>
          </div>
        </div>

        <div class="tl-item">
          <div class="tl-dot"></div>
          <div class="tl-content">
            <div class="tl-title">December 2021</div>
            <div class="tl-text">
              Updated GWAS Catalog release to the latest available.
            </div>
          </div>
        </div>

        <div class="tl-item">
          <div class="tl-dot"></div>
          <div class="tl-content">
            <div class="tl-title">November 2021</div>
            <div class="tl-text">
              Added major GWAS summary statistics and new annotation mode (up to 10,000 SNPs without GSEA).
            </div>
          </div>
        </div>

        <div class="tl-item">
          <div class="tl-dot"></div>
          <div class="tl-content">
            <div class="tl-title">August 2021</div>
            <div class="tl-text">
              Switched to CADD v1.6 and improved support for rarer variants (1000G).
            </div>
          </div>
        </div>

        <div class="tl-item">
          <div class="tl-dot"></div>
          <div class="tl-content">
            <div class="tl-title">May 2021</div>
            <div class="tl-text">
              snpXplorer was born.
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- WHAT'S NEXT + DATA -->
  <div class="container-main about-two">
    <div class="column about-card about-half" id="about-next">
      <h2>What’s next</h2>
      <ul class="nice-list">
        <li>Improve Linkage for PRS and haplotypes</li>
        <li>Increase number of SNPs for Annotation analysis</li>
        <li>Enable upload of your own GWAS datasets</li>
        <li>More support for structural variations</li>
        <li>AI center</li>
      </ul>
      <h2>Stay tuned for amazing news!</h2>
    </div>

    <div class="column about-card about-half" id="about-data">
      <h2>Data & references</h2>
      <div class="mini-cards">

        <div class="mini-card">
          <div class="mini-title">OpenGWAS</div>
          <div class="mini-text">
            GWAS studies are based on OpenGWAS (regularly updated). Full dataset list:
            <a href="https://gwas.mrcieu.ac.uk/" target="_blank" rel="noopener">gwas.mrcieu.ac.uk</a>.
          </div>
        </div>

        <div class="mini-card">
          <div class="mini-title">Structural variants</div>
          <div class="mini-text">
            Structural variants datasets based on our publication in Genome Research:
            <a href="https://genome.cshlp.org/content/34/11/1942" target="_blank" rel="noopener">link</a>.
          </div>
        </div>

        <div class="mini-card">
          <div class="mini-title">Linkage disequilibrium (LD)</div>
          <div class="mini-text">
            LD information is derived from TOPMed, enabling LD-based proxy and regional context analyses.
          </div>
        </div>

        <div class="mini-card">
          <div class="mini-title">LLM / semantic search</div>
          <div class="mini-text">
            Trait discovery and deduplication are supported by MiniLM embeddings and SapBERT-style semantic similarity.
          </div>
        </div>

        <div class="mini-card">
          <div class="mini-title">QTL & gene expression</div>
          <div class="mini-text">
            eQTL/sQTL and gene-expression tracks are integrated from GTEx across &gt;40 tissues.
          </div>
        </div>

        <div class="mini-card">
          <div class="mini-title">Variant effects (CADD)</div>
          <div class="mini-text">
            Functional effect predictions are annotated using CADD v1.7.
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- Footnote images -->
  <div class="image-container-foot">
    <img src="{{ url_for('static', filename='images/amstUMC.jpg') }}" alt="ams">
    <img src="{{ url_for('static', filename='images/tudelft1.png') }}" alt="tud">
    <img src="{{ url_for('static', filename='images/github.png') }}" alt="gith">
  </div>

</body>
{% endblock %}